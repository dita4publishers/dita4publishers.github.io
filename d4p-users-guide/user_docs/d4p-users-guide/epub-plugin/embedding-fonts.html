<?xml version="1.0" encoding="UTF-8"?><html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
<meta name="copyright" content="(C) Copyright 2005"></meta>
<meta name="DC.rights.owner" content="(C) Copyright 2005"></meta>
<meta name="DC.Type" content="concept"></meta>
<meta name="DC.Title" content="Embedding Fonts in Your EPUB"></meta>
<meta name="abstract" content="You can embed fonts into your EPUB by providing a manifest that lists the font files to be embedded."></meta>
<meta name="description" content="You can embed fonts into your EPUB by providing a manifest that lists the font files to be embedded."></meta>
<meta name="DC.subject" content="font, embedding in EPUB, embedding, fonts, manifest (for embedding), manifest, font embedding, css, @font-face instructions, @font-face CSS instruction, using from CSS"></meta>
<meta name="keywords" content="font, embedding in EPUB, embedding, fonts, manifest (for embedding), manifest, font embedding, css, @font-face instructions, @font-face CSS instruction, using from CSS"></meta>
<meta name="DC.Relation" scheme="URI" content="generating-epubs.html"></meta>
<meta name="DC.Relation" scheme="URI" content="overriding-base-processing.html"></meta>
<meta name="DC.Relation" scheme="URI" content="epub-transtype-parameters-ref.html"></meta>
<meta name="prodname" content="DITA For Publishers"></meta>
<meta name="prodname" content="DITA For Publishers"></meta>
<meta name="prodname" content="DITA For Publishers"></meta>
<meta name="prodname" content="DITA For Publishers"></meta>
<meta name="version" content="1"></meta>
<meta name="version" content="1"></meta>
<meta name="version" content="1"></meta>
<meta name="version" content="1"></meta>
<meta name="release" content="0"></meta>
<meta name="release" content="0"></meta>
<meta name="release" content="0"></meta>
<meta name="release" content="0"></meta>
<meta name="modification" content="0RC17"></meta>
<meta name="modification" content="0RC17"></meta>
<meta name="modification" content="0RC17"></meta>
<meta name="modification" content="0RC17"></meta>
<meta name="DC.Creator" content="W. Eliot Kimber"></meta>
<meta name="DC.Creator" content="W. Eliot Kimber"></meta>
<meta name="DC.Creator" content="W. Eliot Kimber"></meta>
<meta name="DC.Creator" content="W. Eliot Kimber"></meta>
<meta name="DC.Format" content="XHTML"></meta>
<meta name="DC.Identifier" content="conceptId"></meta>
<link rel="stylesheet" type="text/css" href="../../../css/commonltr.css"></link>
<link rel="stylesheet" type="text/css" href="../../../css/screen.css"></link>
<title>Embedding Fonts in Your EPUB</title>
</head>
<body id="conceptId">


 <h1 class="title topictitle1">Embedding Fonts in Your EPUB</h1>
 
  
 <div class="body conbody"><p class="shortdesc">You can embed fonts into your EPUB by providing a manifest that lists the font files to
    be embedded.</p>

    <p class="p">While embedding fonts in EPUBs is generally not recommended because of interoperation and
      file size concerns, if you need to embed fonts in your EPUB you can do so.</p>

    <p class="p">To embed fonts you define a <dfn class="term">font manifest</dfn> document that lists the fonts to be
      embedded and then specify the URI of the manifest as a runtime option to the EPUB transform
        (<a class="xref" href="reference/ant-parm-epub-font-manifest.html">epub.font.manifest Ant parameter</a>). The fonts listed
      will be copied to the temporary output location and included in the EPUB file. You can also
      specify the location within the EPUB package where the fonts will be stored, which by default
      is the directory named "<span class="ph filepath">fonts</span>" (<a class="xref" href="reference/ant-parm-epub-font-output-dir.html">epub.fonts.output.dir Ant parameter</a>).</p>

    <p class="p">You can optionally obfuscate any fonts by specifying "obfuscate" for the
        <code>@obfuscate</code> attribute and setting the runtime Ant property
        <span class="keyword parmname">epub.obfuscate.fonts</span> to true (<a class="xref" href="reference/ant-parm-d4p.obfuscate.fonts.html">epub.obfuscate.fonts Ant parameter</a>). By default fonts are not obfuscated and fonts
      marked for obfuscation are not actually obfuscated unless you specifically turn obfuscation on
      with the <span class="keyword parmname">epub.obfuscate.fonts</span> Ant property. This allows you to generate
      EPUBs with unobfuscated fonts for testing or for use with readers that do not support
      obfuscation without having to modify the font manifest.</p>

    <p class="p">You must create the appropriate <code>@font-face</code> rules in the CSS style sheets used
      for the HTML content. The @font-face rules must reflect the location of the fonts in the final
      EPUB package, not their source location. For example, if the fonts are stored in a directory
      named "<span class="ph filepath">my-fonts</span>" but packaged in the default "<span class="ph filepath">fonts</span>"
      directory, then your CSS needs to reflect the "<span class="ph filepath">fonts</span>" directory, not
        "<span class="ph filepath">my-fonts</span>". See examples of <code>@font-face</code> rules below.</p>

    <p class="p">You can generate a CSS file containing the @font-face rules for the fonts in the manifest by
      setting the <a class="xref" href="reference/ant-parm-d4p.generate-css-font-rules.html">epub.generate.css.font.rules Ant parameter</a> to "true" and including
      configuration details for the @font-face rules in the font manifest for each font. You must
      separately create a reference to genenerated CSS file in one of the CSS files included in the
      EPUB. </p>

  </div>

  <div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="generating-epubs.html">generating-epubs.html</a></div>
<div class="previouslink"><strong>Previous topic:</strong> <a class="link" href="overriding-base-processing.html">overriding-base-processing.html</a></div>
<div class="nextlink"><strong>Next topic:</strong> <a class="link" href="epub-transtype-parameters-ref.html">epub-transtype-parameters-ref.html</a></div>
</div>
</div>
<div class="topic concept nested1" id="concept_tw3_1nc_r5">
    <h2 class="title topictitle2">The Font Manifest File</h2>

    
    <div class="body conbody">
      <p class="p">The font manifest file is an XML document that lists the fonts to be embedded. The grammar
        for the document is the font-manifest RELAX NG grammar included in the
        org.dita4publishers.doctypes plugin. The plugin also includes a template font manifest
        document.</p>

      <div class="p">A font manifest file looks like
        this:<pre class="pre codeblock">&lt;font-manifest&gt;
    &lt;title&gt;EPUB Font Manifest&lt;/title&gt;
    &lt;desc/&gt;
    &lt;font-set&gt;
      &lt;title&gt;Base font set&lt;/title&gt;
      &lt;desc/&gt;
      &lt;font uri="Papyrus.ttc"/&gt;
    &lt;/font-set&gt;
&lt;/font-manifest&gt;</pre>
</div>

      <p class="p">You use the <code>&lt;font&gt;</code> element to specify the relative URI of a font to embed.
        The URI is relative to the location of the font manifest file itself. In this example, the
        font manifest document must be in the same directory as the referenced font
        ("Papyrus.ttc").</p>

      <p class="p">You group the <code>&lt;font&gt;</code> elements into one or more <code>&lt;font-set&gt;</code>
        elements. For now there is no special functionality associated with font sets but they may
        be used in the future to enable conditional selection of fonts at runtime if anyone needs
        that level of control or convenience.</p>

      <p class="p">The <code>&lt;title&gt;</code> and <code>&lt;desc&gt;</code> elements are just for
        documentation purposes.</p>

      <p class="p">If you need to obfuscate a font when it is embedded you can specify the
          <code>@obfuscate</code> attribute on <code>&lt;font&gt;</code> or
          <code>&lt;font-set&gt;</code> with the value "obfuscate". Fonts marked "obfuscate" will be
        obfuscated when obfuscation is turned on at EPUB generation time (obfuscation is off by
        default).</p>

      <div class="p">For
        example:<pre class="pre codeblock">&lt;font uri="Papyrus.ttc" <strong class="ph b">obfuscate="obfuscate"</strong>/&gt;</pre>
</div>

      <p class="p">You can add additional details to the font manifest to configure the generation of CSS
        @font-face rules.</p>

    </div>

  </div>

  <div class="topic concept nested1" id="epub-embeddig-fonts">
    <h2 class="title topictitle2">Using Fonts from CSS Style Sheets (@font-face)</h2>

    
    <div class="body conbody">
      <p class="p">To use embedded fonts you must include @font-face rules in your CSS style sheets in order
        to associate font family names to the font files in your EPUB. There is no automatic
        matching of font-family values to font files. The EPUB generation process does not do any
        manipulation of CSS files for you, although you can generate the @font-face rules at runtime
        using configuration in the font manifest.</p>

      <div class="p">A typical @font-face rule looks like
        this:<pre class="pre codeblock">@font-face {
  font-family : Arial;
  font-weight : bold;
  font-style: normal;
  src : url(../fonts/Arial-BoldMT.ttf);
}</pre>
</div>

      <p class="p">The font-family value is the name that will be used on font-family entries elsewhere in the
        CSS. The src value is the relative URL of the font file as it is packaged in the EPUB,
        relative to the location of the CSS style sheet file as packaged in the EPUB.</p>

      <p class="p">In this example, the style sheet must be in a directory next to the
          <span class="ph filepath">fonts</span> directory, maybe a directory named
        <span class="ph filepath">css</span>.</p>

      <p class="p">You need one @font-face rule for each different combination of font properties (font
        weight, font style, etc.) for a given font family.</p>

      <p class="p">See the CSS specification or a good CSS guide for details.</p>

    </div>

  </div>

  <div class="topic concept nested1" id="concept_ogk_cpc_yv">
    <h2 class="title topictitle2">Generating @font-face Rules</h2>

    
    <div class="body conbody"><p class="shortdesc">You can optionally request the generation of a CSS file containing @font-face rules
      for the fonts in the font manifest.</p>

      <p class="p">If you specify "true" for the <a class="xref" href="reference/ant-parm-d4p.generate-css-font-rules.html">epub.generate.css.font.rules Ant parameter</a> the
        EPUB transform will generate a CSS file containing @font-face rules for each font in the
        font manifest. The CSS file is generated in the configured font output directory. The
        default name of the generated CSS file is "fonts.css". To use this file you must separately
        add an @import rule to the main CSS file you want to use the fonts from, e.g.
          <samp class="ph codeph">@import "../fonts/fonts.css";</samp>.</p>

      <div class="p">By default you get one @font-face rule for each font in the font manifest. However, you can
        add <code>&lt;font-face&gt;</code> elements within a <code>&lt;font&gt;</code> element to
        produce multiple result @font-face rules for the same physical font
        file:<pre class="pre codeblock">&lt;font-manifest&gt;
    &lt;title&gt;Fonts for My EPUB&lt;/title&gt;
    &lt;font-set <strong class="ph b">css-filename="fonts.css"</strong>&gt;
      &lt;title&gt;Base font set&lt;/title&gt;
      &lt;desc&gt;This is the description.&lt;/desc&gt;
      &lt;font uri="Avenir-Black.ttf" <strong class="ph b">css-font-family-name="Avenir"</strong>&gt;
        <strong class="ph b">&lt;css-rules&gt;</strong>
          <strong class="ph b">&lt;font-face font-weight="bold" font-style="italic"/&gt;
</strong>          &lt;font-face font-style="italic"/&gt;
           &lt;font-face font-weight="bold" 
            font-stretch="condensed"            
          /&gt;
        &lt;/css-rules&gt;
      &lt;/font&gt;
  ...
&lt;/font-set&gt;</pre>
</div>

      <p class="p">The <code>@css-filename</code> attribute on <code>&lt;font-set&gt;</code> specifies the
        filename to use for the generated CSS file. The default is "fonts.css". The location of the
        file is relative to the configured fonts directory.</p>

      <p class="p">On the <code>&lt;font&gt;</code> element you specify the
          <code>@css-font-family-name</code> to set the value of the "font-family" property in
        the @font-face rule. The default is the filename of the physical font with the extension
        removed.</p>

      <p class="p">The <code>&lt;css-rules&gt;</code> element contains zero or more <code>&lt;font-face&gt;</code>
        elements.</p>

      <p class="p">Each <code>&lt;font-face&gt;</code> element represents a separate @font-face rule. The
          <code>&lt;font-face&gt;</code> element takes attributes corresponding to the properties
        allowed (or expected) on @font-face rules. Each attribute will be used to generate the
        corresponding property in the @font-face rule. Because CSS is inherently extensible and
        constantly being updated, there is no checking on the actual attributes you use (although
        the RELAX NG grammar for the font manifest defines a specific set of attributes reflecting
        the current set of defined font properties as an aid in authoring font manifest files).</p>

    </div>

  </div>


</body>
</html>